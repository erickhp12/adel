{% extends "base.html" %}
{% block title %}ADEL | Gastos {% endblock %}
{% load staticfiles %}

{% block body %}
 
 <div class = "header">
        <p class="header_text">Gastos actuales ({{ total_gastos }})</p>
    </div>
<section class="seccion_fondo">
  
  <section class="herramientas_menu">  
    <div class="seccion_busqueda">   
      <span>Buscar algun registro </span><input type="text" id="myInput" onkeyup="myFunction()" placeholder="buscar" class="search_busqueda"/>
    </div>
    <div class="seccion_agregar_nuevo">
      <a href="/registro.gastos">
            <input type="button" name="link_add_gasto" 
            class="btn_naranja btn_agregar_elemento" value="Agregar un nuevo gasto"/>
      </a>
    </div>
  </section>

  <table>
     <thead class="columna">
          <th>Proveedor</th>
          <th>Motivo</th>
          <th>Precio</th>
          <th>Informacion</th>
          <th>Edicion</th>
     </thead>
     {% for gasto in total %}
     <tbody class="contenido" id="contenido">
          <td>{{ gasto.proveedor }}</td>
          <td>{{ gasto.motivo }}</td>
          <td>{{ gasto.precio }} {{ gasto.dolares }}</td>
          <td><a href="{{ gasto.url_ver_gasto }}">Ver</a></td>
          <td><a href="{{ gasto.url_editar_gasto }}">Editar</a></td>
     </tbody>
     {% endfor %}
     </table>
      <span class="total_gastos">Ingreso en pesos: {% for key, value in total_value.items %}
        {{ value }}
        {% endfor %}
        </span><br>
</section>

<script>
function myFunction() {
    var input, filter, ul, li, a, i, td,tbody,texto_a_buscar;
    input = document.getElementById("myInput");
    tbody = document.getElementById("contenido");
    td = tbody.innerHTML
    console.log("este es mi TD? " + td);
    li = tbody.getElementsByTagName("td"); 
     for (i = 0; i < li.length; i++) {
          td = tbody.innerHTML
          console.log("td " + td)
          texto_a_buscar = input.value
          console.log("texto a buscar " + texto_a_buscar);
          console.log("texto li " + li[0].innerHTML);
          if (li[0].innerHTML.includes(texto_a_buscar) ){
               console.log("entre a if indice " + li[i]);
               li[i].style.color = "red";
          }else {
               console.log("entre a else indice " + li[i])
               li[i].style.display = "none";
        }
    }
}
</script>

{% endblock %}


