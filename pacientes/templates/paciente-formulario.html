{% extends 'base.html' %}
{% block title %}ADEL | pacientes {% endblock %}
{% block body %}

    {% load staticfiles %}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="{% static '/static/js/generic/calendarios.js'%}"></script>

<!-- ************************************  HELPER ************************************ -->
 <div class="container col-md-8 thumbnail col-md-offset-2 bs-header">
    <div class="col-md-2 volver">
        <a href="/lista.pacientes">
          <label class="glyphicon glyphicon-chevron-left"></label>&nbsp;Volver</a>
    </div>
    <div class="col-md-9 bs-header-text helper-text">
        {% if paciente.nombre %}
            <label>{{ paciente.nombre }}</label>
        {% else %}
            <label>Agregar paciente</label>
        {% endif %}
    </div>
    <div class="helper-img col-md-1">
        <img src="{% static 'img/iconos/pacientes40.png' %}"  class="helper-img" alt="ups">
    </div>
</div>

    <!-- ************************************ FORM ************************************ -->
<div class="container col-md-8 thumbnail col-md-offset-2">
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <br>
            <form method="post">
                {% csrf_token %}

                <fieldset class="fieldset">
                    <legend>
                        <b>Información requerida</b>
                    </legend>

                    <div class="form-group col-md-6">
                        <label>Nombre</label>
                        {% if paciente.nombre %}
                            <input type="text" value="{{ paciente.nombre}}" name="nombre" id="nombre" readonly="readonly"> 
                        {% else %}
                            <input type="text" name="nombre" id="nombre" class="input-personalized"> 
                        {% endif %}
                    </div>


                    <div class="form-group col-md-6 col-sm-6 col-sm-6">
                        <label class="col-md-12 col-sm-12 col-xs-12">Fecha de nacimiento</label>
                        <select class="col-md-2 col-sm-7 col-xs-7 fecha-nacimiento-dia" name="day" id="day">
                            <option id="day" name="day" value="01">01</option>
                            <option id="day" name="day" value="02">02</option>
                            <option id="day" name="day" value="03">03</option>
                            <option id="day" name="day" value="04">04</option>
                            <option id="day" name="day" value="05">05</option>
                            <option id="day" name="day" value="06">06</option>
                            <option id="day" name="day" value="07">07</option>
                            <option id="day" name="day" value="08">08</option>
                            <option id="day" name="day" value="09">09</option>
                            <option id="day" name="day" value="10">10</option>
                            <option id="day" name="day" value="11">11</option>
                            <option id="day" name="day" value="12">12</option>
                            <option id="day" name="day" value="13">13</option>
                            <option id="day" name="day" value="14">14</option>
                            <option id="day" name="day" value="15">15</option>
                            <option id="day" name="day" value="16">16</option>
                            <option id="day" name="day" value="17">17</option>
                            <option id="day" name="day" value="18">18</option>
                            <option id="day" name="day" value="19">19</option>
                            <option id="day" name="day" value="20">20</option>
                            <option id="day" name="day" value="21">21</option>
                            <option id="day" name="day" value="22">22</option>
                            <option id="day" name="day" value="23">23</option>
                            <option id="day" name="day" value="24">24</option>
                            <option id="day" name="day" value="25">25</option>
                            <option id="day" name="day" value="26">26</option>
                            <option id="day" name="day" value="27">29</option>
                            <option id="day" name="day" value="28">28</option>
                            <option id="day" name="day" value="29">29</option>
                            <option id="day" name="day" value="30">30</option>
                            <option id="day" name="day" value="31">31</option>    
                        </select>
                        <select class="col-md-4 col-sm-7 col-xs-7 fecha-nacimiento" name="month" id="month">
                            <option id="month" name="month" value="01">Enero</option>
                            <option id="month" name="month" value="02">Febrero</option>
                            <option id="month" name="month" value="03">Marzo</option>
                            <option id="month" name="month" value="04">Abril</option>
                            <option id="month" name="month" value="05">Mayo</option>
                            <option id="month" name="month" value="06">Junio</option>
                            <option id="month" name="month" value="07">Julio</option>
                            <option id="month" name="month" value="08">Agosto</option>
                            <option id="month" name="month" value="09">Septiembre</option>
                            <option id="month" name="month" value="10">Octubre</option>
                            <option id="month" name="month" value="11">Noviembre</option>
                            <option id="month" name="month" value="12">Diciembre</option>
                        </select>
                        <select class="col-md-3 col-sm-7 col-xs-7 fecha-nacimiento" name="year" id="year">
                            {% for year in years %}
                                    <option id="year" name="year" value="{{ year }}">{{ year }}</option>
                                {% endfor %}
                        </select>
                    </div>
                </fieldset>

                <fieldset class="fieldset">
                    <div class="form-group col-md-6">
                        <label>Sexo</label>
                        <select id="sexo" name="sexo">
                        {% if paciente.nombre %}
                            <option id="sexo" name="sexo" value={{paciente.sexo}} >{{paciente.sexo}}</option> 
                        {% else %}
                            <option id="sexo" name="sexo" value="------">------</option> 
                        {% endif %}
                            {% for choice in form.sexo.field.choices %}
                                <option id="sexo" name="sexo" value={{choice.1}} >{{ choice.1}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group col-md-6">
                        <label>Tipo de paciente</label>
                        <select id="tipo_paciente" name="tipo_paciente" onchange="reassign_values()">
                        {% if paciente.nombre %}
                            <option id="tipo_paciente" name="tipo_paciente" value={{paciente.tipo_paciente}} >{{paciente.tipo_paciente}}</option> 
                        {% else %}
                            <option id="tipo_paciente" name="tipo_paciente" value="------">------</option> 
                        {% endif %}
                            {% for choice in form.tipo_paciente.field.choices %}
                                <option id="tipo_paciente" name="tipo_paciente" value={{choice.1}} >{{ choice.1}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </fieldset>

                <fieldset class="fieldset">
                    <div class="form-group col-md-6">
                        <label>Aseguranza</label>
                        <input type="text" name="aseguranza" id="aseguranza" value="{{paciente.aseguranza}}" class="input-personalized">
                    </div>
                    <div class="form-group col-md-6">
                        <label>Teléfono</label>
                        <input type="text" value="{{ paciente.telefono }}" placeholder="(656) 000-00-00"
                        name="telefono" id="telefono" class="input-personalized">
                    </div>
                </fieldset>

                <fieldset class="fieldset">
                    <div class="form-group col-md-6">
                        <label>Correo electrónico</label>
                        <input type="text" name="correo" id="correo" value="{{ paciente.correo }}" class="input-personalized">
                    </div>
                    <div class="form-group col-md-6">
                        <label>Dirección</label>
                        <input type="text" value="{{ paciente.direccion }}" name="direccion" id="direccion" class="input-personalized">
                    </div>
                </fieldset>

                <fieldset class="fieldset">
                    <div class="form-group col-md-12">
                        <label>Comentarios</label>
                        <textarea class="form-control" id="comentarios" name="comentarios" rows="5" id="comment">{{ paciente.comentarios }}</textarea>
                    </div>
                </fieldset>

                <div class="form-group">
                    <div class="col-md-12">
                            {% if paciente.nombre %}
                                <button type="submit" onclick="set_empty_values()" class="btn btn-success col-md-4">Actualizar información</button>
                            {% else %}
                                <button type="submit" onclick="set_empty_values()" class="btn btn-success col-md-4">Agregar paciente</button>
                            {% endif %}
                        <br>
                        <br>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
    <!-- ************************************ JS ************************************** -->
    <script>
        function set_empty_values() {
            nombre = document.getElementById('nombre');
            sexo = document.getElementById('sexo');
            tipo_paciente = document.getElementById('tipo_paciente');
            aseguranza = document.getElementById('aseguranza');
            telefono = document.getElementById('telefono');
            correo = document.getElementById('correo');
            direccion = document.getElementById('direccion');
            comentarios = document.getElementById('comentarios');


            if (nombre.value == "") {
                alert('el campo nombre es requerido');
                nombre.value = "";
            }
            if (sexo.value == "") {
                sexo.value = "---";
            }
            if (tipo_paciente.value == "") {
                tipo_paciente.value = "---";
            }
            if (aseguranza.value == "") {
                aseguranza.value = "---";
            }
            if (telefono.value == "") {
                telefono.value = "No registrado";
            }
            if (correo.value == "") {
                correo.value = "---";
            }
            if (direccion.value == "") {
                direccion.value = "---";
            }
            if (comentarios.value == "") {
                comentarios.value = "---";
            }
        }

        function reassign_values(){
            var textbox_aseguranza = document.getElementById('aseguranza');
            var tipo_paciente = document.getElementById('tipo_paciente');
            if (tipo_paciente.value == "Aseguranza") {
            textbox_aseguranza.readOnly = false;
            textbox_aseguranza.value = "";
            textbox_aseguranza.placeholder = "Introduce la aseguranza";
            }else{
                textbox_aseguranza.readOnly = true;
                textbox_aseguranza.value = "No aplica";
                textbox_aseguranza.placeholder = "";
            }
        }
    </script> 

{% endblock %} 